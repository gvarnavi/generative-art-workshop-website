"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[446],{1464:function(e,t,r){r.r(t),r.d(t,{contentTitle:function(){return h},default:function(){return w},frontMatter:function(){return g},metadata:function(){return b},toc:function(){return y}});var n=r(7462),i=r(3366),o=r(7294),s=r(3905),a=r(2790),l=r(8306),c=r(2543);function d(e,t){const r=e.module();return r.variable(t()).define(["md"],(function(e){return e`# Interactive L-systems`})),r.variable(t()).define(["md"],(function(e){return e`**Note**: This is a minimal fork of the excellent [L-systems #2 â€” using SVG](https://observablehq.com/@kelleyvanevert/l-systems-2) notebook by [Kelley van Evert](https://observablehq.com/@kelleyvanevert).`})),r.variable(t()).define(["md","tex"],(function(e,t){return e`These L-systems are built from the following meaningful syntax:

<pre>
  <strong>Moving & drawing</strong>                      <strong>Turning</strong>
    F  draw & move forward                +  turn right
    f  draw without moving forward        -  turn left
    g  just go forward                    |  turn 180 deg
    {  begin polygon (dotted line)
    .  add polygon point
    }  end polygon (dotted line)
                                        <strong>State</strong>
  <strong>Step length</strong>                           (<em>position</em>, <em>heading</em> (${t`\mathop{\to}`}), <em>angle</em> (${t`90^\circ`}), <em>step length</em>)
    @${t`n`}   step := step${t`~\times~n`}                 [  save current state
    @I${t`n`}  step := step${t`~\times~(\frac{1}{n})`}               ]  restore state
    @Q${t`n`}  step := step${t`~\times~\sqrt{n}`}
</pre>

Any other symbols can be used as well, to control the production rules, but will be treated as meaningless at draw-time.`})),r.variable(t()).define(["md"],(function(e){return e`## Interactive editor`})),r.variable(t()).define(["md"],(function(e){return e`The editors below can be used to interactively edit L-systems.

- *Redraw on edit*. The structure is redrawn on every succesful edit of the system specification. (I.e., when there is a syntax error, the previous structure is kept displayed.)
- *Animate*. You can animate the drawing by clicking the SVG, or including the <code>animate</code> flag in the specification.
- *Download SVG / PNG*. You can down the image as an SVG or PNG by clicking on the button in the bottom-right corner on the image.

Be careful with large order numbers: the computation time grows exponentially, and you might hang your browser :)`})),r.variable(t()).define(["md"],(function(e){return e`### Sierpinski triangle`})),r.variable(t("viewof sierpinski")).define("viewof sierpinski",["edit","L","parse"],(function(e,t,r){return e(t(r("order: 7\naxiom: AF\nangle: 60\nanimate\n\nA -> BF-AF-B\nB -> AF+BF+A")))})),r.variable(t("sierpinski")).define("sierpinski",["Generators","viewof sierpinski"],((e,t)=>e.input(t))),r.variable(t()).define(["md"],(function(e){return e`## Implementation`})),r.variable(t("L")).define("L",(function(){return function(e={}){var t;function r(){t=[e.axiom]}function n(r=0){return new Promise((n=>{!function i(){if(t[r])return n(t[r]);t.push(t[t.length-1].replace(/./g,(t=>e.rules[t]))),setTimeout(i,1)}()}))}return r(),n.reset=r,n.system=e,n}})),r.variable(t("L_old")).define("L_old",(function(){return function(e={}){var t;function r(){t=[e.axiom]}function n(r=0){for(var n=t.length;n<=r;n++)t[n]=t[n-1].replace(/./g,(t=>e.rules[t]));return t[r]}return r(),n.reset=r,n.system=e,n}})),r.variable(t("stringify")).define("stringify",(function(){return function(e){return`order: ${e.order}\naxiom: ${e.axiom}\nangle: ${e.angle}${"no"===e.animate?"\nanimate: no":""}${e.colorful?"\ncolorful":""}\n\n${Object.entries(e.rules).map((([e,t])=>`${e} -> ${t}`)).join("\n")}`}})),r.variable(t("parse")).define("parse",["colorsets"],(function(e){return function(t=""){const r={angle:[/^[0-9\.]+$/,parseFloat],order:[/^[0-9]+$/,parseInt],axiom:String,animate:()=>!0,colorful:()=>!0,stroke:String,fill:String,bg:String},n=Object.create({axiom:"X",angle:90,fill:"#f6f6f6",stroke:"black",bg:"#f9f9f9"});var i,o;n.rules={},n._text=t,t.split("\n").forEach((e=>{if((e=e.trim())&&!e.match(/^\/\//))if(i=e.match(/^([a-z]+)(?:[ ]*:[ ]*(.*))?$/)){if(!(o=r[i[1]]))throw"Err: key not known: "+i[1];var t=/.*/,s=o;if(o.splice&&(t=o[0],s=o[1]),!(i[2]||"").match(t))throw"Parameter invalid: "+i[1];n[i[1]]=s(i[2]||"")}else{if(!(i=e.match(/^([A-Z])[ ]*(?:->|=)[ ]*(.*)$/)))throw"Err: line not parseable: "+e;n.rules[i[1]]=i[2]}}));const s={};if(Object.values(n.rules).forEach((e=>{e.split("").forEach((e=>{void 0===n.rules[e]&&(s[e]=e)}))})),n.rules=Object.assign(Object.create(s),n.rules),n.order||(n.order=2),n.colorful){const t=e[Math.floor(Math.random()*e.length)];Object.assign(n,t)}return n}})),r.variable(t("edit")).define("edit",["html","stringify","d3","DOM","parse","L","draw"],(function(e,t,r,n,i,o,s){return function(a,l={}){const c=400,d=(Object.entries(a.system.rules).map((([e,t])=>`${e} -> ${t}`)).join("\n"),e`<form class="l-system-editor" style="display: flex;">
    <div class="c" style="width: ${c}px; box-sizing: border-box; height: ${c}px; background: #fafafa; position: relative;">
       <div style="position: absolute; bottom: 0; right: 0;">
         <a class="d svg" download="im.svg" href="#" style="font-size: 14px; display: inline-block; padding: 0 4px;">Download SVG</a>
         <a class="d png" download="im.png" href="#" style="font-size: 14px; display: inline-block; padding: 0 4px;">Download PNG</a>
       </div>
    </div>
    <div class="l-system" style="min-width: ${c}px; height: ${c}px;">
      <textarea style="resize: none; font-size: 14px; margin: 0; width: ${c}px; height: ${c}px; padding: 10px; box-sizing: border-box; border: 2px solid #eee;">${a.system._text||t(a.system)}</textarea>
    </div>
    <style>
      .l-system-editor a { color: #000; opacity: .4; }
      .l-system-editor .c:hover a { color: #fff; background: #222; opacity: 1; text-decoration: none; }
    </style>
    <div style="clear: both;"></div>
  </form>`),u=r.select(n.svg(c,c));u.node().style="display: inline-block; background: #fafafa;",d.querySelector(".c").appendChild(u.node());const m=d.querySelector("a.d.png");m.onclick=function(e){var t=m.href=URL.createObjectURL(u._pngblob);setTimeout((function(){URL.revokeObjectURL(t)}),50)};const p=d.querySelector("a.d.svg");p.onclick=function(e){var t=p.href=URL.createObjectURL(u._svgblob);setTimeout((function(){URL.revokeObjectURL(t)}),50)};const f=d.querySelector("textarea"),g="oninput";return d[g]=e=>{var t;e&&e.preventDefault();try{t=i(f.value)}catch(e){f.style.color="#d00"}t&&(a=o(t),f.style.color="#333",s(a,c,u),d.output&&(d.output.value=a),d.value=a)},d[g](),d.value=a,d}})),r.variable(t("linedata")).define("linedata",["Matrix"],(function(e){return function(t,r=t.system.order){const n=[],i=[],o=[],s=[new e];s[0]._step=1;const a=()=>n.unshift([s[0].applyToPoint(0,0)]),l=()=>n[0].push(s[0].applyToPoint(s[0]._step,0)),c=()=>s[0].translate(s[0]._step,0),d={F:()=>(l(),c()),f:()=>(l(),a()),g:()=>(c(),a()),"+":()=>s[0].rotateDeg(t.system.angle),"-":()=>s[0].rotateDeg(-t.system.angle),"|":()=>s[0].rotateDeg(180),"[":()=>{s.unshift(s[0].clone()),s[0]._step=s[1]._step},"]":()=>(s.shift(),a()),".":()=>(()=>{if(!o.length)throw"No polygon [add_poly_dot]";o[0].push(s[0].applyToPoint(0,0))})(),"{":()=>o.unshift([]),"}":()=>(()=>{if(!o.length)throw"No polygon [close_polyong]";var e=o.shift();e.push(e[0]),i.push(e)})()};return a(),new Promise((e=>{t(r).then((r=>{for(var o;o=r.match(/^([^@]|@[IQ]?[0-9\.]+\^?)/);)if(r=r.slice(o[1].length),"@"==o[1][0]){var a=(o=o[1].match(/^@([IQ]?)([0-9\.]+)(\^?)/))[1],l=parseFloat(o[2]);o[3]&&(l=Math.pow(l,t.system.order)),"I"==a&&(l=1/l),"Q"==a&&(l=Math.sqrt(l)),s[0]._step*=l}else d[o[1]]&&d[o[1]]();e({lines:n,polygons:i})}))}))}})),r.variable(t("bounds")).define("bounds",(function(){return function(e){const t=[0,0,0,0];for(var r of e)for(var n of r)n.x<t[0]&&(t[0]=n.x),n.y<t[1]&&(t[1]=n.y),n.x>t[2]&&(t[2]=n.x),n.y>t[3]&&(t[3]=n.y);return t}})),r.variable(t("draw")).define("draw",["d3","DOM","linedata","bounds","serialize","rasterize"],(function(e,t,r,n,i,o){return function(s,a=300,l=e.select(t.svg(a,a))){l.selectAll("path").interrupt();const c=l.node();for(;c.lastChild;)c.removeChild(c.lastChild);return l.append("rect").attr("x",0).attr("width",a).attr("y",0).attr("height",a).attr("fill",s.system.bg).attr("stroke","none"),new Promise((t=>{r(s).then((r=>{const c=n(r.lines);var d=a/(c[2]-c[0]),u=a/(c[3]-c[1]),m=c[2]-c[0]-(c[3]-c[1]);d>u?(c[2]-=m/2,c[0]+=m/2):(c[3]+=m/2,c[1]-=m/2);const p=e.scaleLinear().domain([c[0],c[2]]).range([10,a-10]),f=e.scaleLinear().domain([c[1],c[3]]).range([10,a-10]),g=e.line().x((e=>p(e.x))).y((e=>f(e.y))),h=r.polygons.reverse();l.append("g").attr("class","poly").attr("fill",s.system.fill).attr("stroke",s.system.stroke).attr("stroke-width","1").attr("stroke-dasharray","3 3").selectAll("path").data(h).enter().append("path").attr("d",g);const b=r.lines.reverse();var y=l.append("g").attr("class","line").attr("fill","none").attr("stroke",s.system.stroke).attr("stroke-width","1").attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(b.filter((e=>e.length>1))).enter().append("path").attr("d",g);function v(){var t=0;y.interrupt().attr("stroke-dashoffset",(function(e){return e._prevt=t,t+=e._len=this.getTotalLength(),e._len})).attr("stroke-dasharray",(e=>e._len+" "+e._len));var r=1500/t;y.transition().delay((e=>e._prevt*r)).duration((e=>e._len*r)).ease(e.easeLinear).attr("stroke-dashoffset",0)}l._svgblob=i(l.node()),o(l.node(),2).then((e=>{l._pngblob=e,s.system.animate&&v()})),l.on("click",null).on("click",v),t(l.node())}))}))}})),r.variable(t("colorsets")).define("colorsets",(function(){return[{bg:"yellow",stroke:"orange",fill:"#db1717"},{bg:"lightgreen",stroke:"darkgreen",fill:"lightgreen"},{bg:"#345fa1",stroke:"#d0e8e9",fill:"#adb16c"},{bg:"#34a17e",stroke:"#f4f6d1",fill:"#adb16c"}]})),r.variable(t()).define(["md"],(function(e){return e`## Dependencies`})),r.variable(t("Matrix")).define("Matrix",["require"],(function(e){return e("transformation-matrix-js").catch((e=>window.Matrix))})),r.variable(t("d3")).define("d3",["require"],(function(e){return e("https://d3js.org/d3.v5.min.js")})),r.variable(t("serialize")).define("serialize",(function(){const e="http://www.w3.org/2000/xmlns/";return function(t){(t=t.cloneNode(!0)).setAttributeNS(e,"xmlns","http://www.w3.org/2000/svg"),t.setAttributeNS(e,"xmlns:xlink","http://www.w3.org/1999/xlink");const r=(new window.XMLSerializer).serializeToString(t);return new Blob([r],{type:"image/svg+xml"})}})),r.variable(t("rasterize")).define("rasterize",["DOM","serialize"],(function(e,t){return function(r,n=1){let i,o;const s=new Promise(((e,t)=>(i=e,o=t))),a=new Image;return a.onerror=o,a.onload=()=>{const t=r.getBoundingClientRect(),o=e.context2d(t.width*n,t.height*n);o.drawImage(a,0,0,t.width*n,t.height*n),o.canvas.toBlob(i)},a.src=URL.createObjectURL(t(r)),s}})),r.variable(t()).define(["md"],(function(e){return e`## Some resources / references

- https://10klsystems.wordpress.com/examples/
- http://www.kevs3d.co.uk/dev/lsystems/
- http://www.cs.brandeis.edu/~storer/JimPuzzles/PACK/CzechFarms/PenroseTilingWikipedia.pdf
- http://codeboje.de/lindenmayer-systems-using-python/
- http://paulbourke.net/fractals/lsys/
- https://cgjennings.ca/articles/l-systems.html
- https://n-e-r-v-o-u-s.com/blog/?p=3983`})),r}var u=function(){var e=(0,o.useRef)();return(0,o.useEffect)((function(){var t=new c.r_;return t.module(d,c.lj.into(e.current)),function(){return t.dispose()}}),[]),o.createElement(o.Fragment,null,o.createElement("div",{ref:e}),o.createElement("p",null,"Credit: ",o.createElement("a",{href:"https://observablehq.com/@gvarnavi/l-systems-interactive"},"Interactive L-systems by Georgios Varnavides")))},m=r(6396),p=r(8215),f=["components"],g={id:"geometric-l-systems",sidebar_position:3,title:"Geometric L-Systems",hide_title:!0},h=void 0,b={unversionedId:"01.25-Tuesday/geometric-l-systems",id:"01.25-Tuesday/geometric-l-systems",title:"Geometric L-Systems",description:"",source:"@site/docs/01.25-Tuesday/geometric-l-systems.mdx",sourceDirName:"01.25-Tuesday",slug:"/01.25-Tuesday/geometric-l-systems",permalink:"/generative-art-workshop-website/docs/01.25-Tuesday/geometric-l-systems",editUrl:"https://github.com/gvarnavi/generative-art-workshop-website/edit/main/website/docs/01.25-Tuesday/geometric-l-systems.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"geometric-l-systems",sidebar_position:3,title:"Geometric L-Systems",hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"Space-Filling Curves",permalink:"/generative-art-workshop-website/docs/01.25-Tuesday/space-filling-curves"},next:{title:"Audio L-Systems",permalink:"/generative-art-workshop-website/docs/01.25-Tuesday/audio-l-systems"}},y=[],v={toc:y};function w(e){var t=e.components,r=(0,i.Z)(e,f);return(0,s.kt)("wrapper",(0,n.Z)({},v,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(m.Z,{lazy:!0,mdxType:"Tabs"},(0,s.kt)(p.Z,{value:"wl-ipynb",label:"Wolfram Language - Jupyter",default:!0,mdxType:"TabItem"},(0,s.kt)(l.Z,{notebookURL:"https://github.com/gvarnavi/generative-art-iap/blob/master/01.25-Tuesday/04_geometric-l-systems-wl.ipynb",mdxType:"NotebookViewer"})),(0,s.kt)(p.Z,{value:"py-ipynb",label:"Python - Jupyter",mdxType:"TabItem"},(0,s.kt)(l.Z,{notebookURL:"https://github.com/gvarnavi/generative-art-iap/blob/master/01.25-Tuesday/04X_geometric-l-systems-py.ipynb",mdxType:"NotebookViewer"})),(0,s.kt)(p.Z,{value:"wl-nb",label:"Wolfram Language",mdxType:"TabItem"},(0,s.kt)(a.Z,{url:"https://www.wolframcloud.com/obj/gvarnavi/Published/04X_geometric-l-systems.nb",mdxType:"NotebookEmbed"})),(0,s.kt)(p.Z,{value:"observable",label:"JS - Observable",mdxType:"TabItem"},(0,s.kt)(u,{mdxType:"LSystemsInteractive"}))))}w.isMDXComponent=!0}}]);